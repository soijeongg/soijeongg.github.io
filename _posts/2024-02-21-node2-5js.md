---
layout: post
read_time: true
show_date: true
title: "[항해 99] RDBMS와 no-sql"
date: 2024-02-21 15:00:20 -0600
description: "[항해 99] RDBMS와 no-sql"
image: https://hanghae99.spartacodingclub.kr/images/main/og.jpg
tags: 
    - coding
    - diary
    - hh99
author: soi

toc: no # leave empty or erase for no TOC
---

## 데이터베이스와 mongDB
DB에 등록하지 않으면 상품등록 데이터가 서버를 종료하거나 재시작시 전부 사라진다 
저장하지 않으면 인메모리 방식으로 저장-> ram과 같은 임시 저장소에 보관하여 어플리케이션 종료 시 임시 저장소의 데이터 또한 함꼐 소멸

- 데이터베이스란?
데이터들의 집합 실제 데이터가 저장되는 저장소의 역할을 수행 
관계를 지정한 데이터베이스: RDBMS
데이터 형식이 정해져 있고 데이터 간에 관계를 맺어 모순이 없는 데이터를 유지 할 수 있도록 도와주는 데이터베이스
관계가 없는 데이터베이스: no-sql
데이터 형식이 고정되어 있지 않고 유연하게 확장가능 
유연성 덕분에 sns 처럼 다양한 형식의 데이터를 빠르게 저장하고 검색해야 하는 경우 주로 사용

- mongoDB
비관계형 데이터베이스중 하나 
모든 데이터가 제이슨형태로 저장-> 복잡한 데이터 구조를 쉽게 저장가능
데이터베이스 서버의 확장을 손쉽게 줄이고 늘일 수 있음
 MongoDB Atlas를 사용해 클라우드 서비스 이용 가능
 
## MongoDB Client: Studio 3T
### Studio 3T
몽고디비를 위해 만들어진 몽고디비 클라이언트
Studio 3T의 GUI를 통해 MongoDB에 저장된 데이터를 관리하기 쉽게 보여주는 프로그램

- DB Client와 API Client의 다른점
1. DB Client
직접 데이터베이스에 접근해 데이터를 조회, 추가, 수정, 삭제하는 기능을 제공
2. API Client
웹 서비스의 api에 연결하여 서버와 데이터 송수신

### mongoose
1. 코드에서 mongoDB적용하기
mongoose는 MongoDB에 데이터를 쉽게 읽고 쓰게 해주는 JavaScript 라이브러리
mongoose를 ODM(Object Document Mapper)이라고도 부름
**ODM이란?**
JavaScript의 객체(Object)와 MongoDB의 문서 사이에서 ‘매핑’을 수행하는 도구
![](../assets/img/uploads/RDE.jpeg)
몽고디비는 데이터베이스 안에 컬렉션(테이블)-> 데이터 하나(도큐먼트) 
- 스키마란?
스키마는 데이터 구조와 어떤 제약 사항을 가지는지 정의하기 위해 사용  -> 일반적으로 데이터를 모델링 할때 사용
일반적으로 모델링 할때 사용 어떤 필드가 있어야 하는지 어떤 데이터 타입을 가져야 하는지 정의

- 모델이란? 
데이터베이스에 데이터를 저장하고 읽어올때 사용되는 데이터 구조 
자바스크립트 객체와 몽고디비간에 상호작용을 하기 위해 사용 
만약 사용자의 데이터를 저장할려면 모델을 사용해 데이터를 생성하고 데이터베이스에 저장가능

### 몽고디비 사용하기
- 먼저 연결하기
``` javascript
import mongoose from 'mongoose';

const connect = () => {
  // mongoose.connect는 MongoDB 서버에 연결하는 메서드입니다.
  mongoose
    .connect(
      // 빨간색으로 표시된 부분은 대여한 ID, Password, 주소에 맞게끔 수정해주세요!
      'mongodb+srv://sparta-user:aaaa4321@express-mongo.uy7ttg7.mongodb.net/?retryWrites=true&w=majority',
      {
        dbName: 'node_lv1', // node_lv1 데이터베이스명을 사용합니다.
      },
    )
    .then(() => console.log('MongoDB 연결에 성공하였습니다.'))
    .catch((err) => console.log(`MongoDB 연결에 실패하였습니다. ${err}`));
};

mongoose.connection.on('error', (err) => {
  console.error('MongoDB 연결 에러', err);
});

export default connect;
```
이렇게 연결하고 연결을 진행 하기 위해 app.js에서 커넥트 가져오고  connect()
```javascript
// app.js
import connect from './schemas/index.js';

connect();
```
 
 스키마 생성후 객체 생성 그 후 crud하기
 
 * find()와 find().exec는 어떤 차이가 있을까?
 exec()를 쓰면 온전한 프로미스를 반환값으로 옴 에러가 났을 때 stack trace에 오류가 발생한 코드의 위치가 포함 -> 공식 문서에서도 exec()을 사용할 것을 권장
 
 static Middleware, express.static()을 사용하여 정적 파일을 제공